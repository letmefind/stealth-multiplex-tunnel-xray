# Stealth Multiplex Tunnel Xray Configuration
# Copy this file to .env and modify values as needed

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# Server B (Receiver) Configuration
B_DOMAIN=cdn.example.com
B_TLS_PORT=8081
SERVER_NAME=cdn.example.com

# Stealth Configuration
STEALTH_PATH=/assets
UUID=12345678-1234-1234-1234-123456789abc

# =============================================================================
# PROTOCOL & SECURITY CONFIGURATION
# =============================================================================

# Protocol: vless or trojan
PROTOCOL=vless

# Security: tls or reality
SECURITY=tls

# =============================================================================
# SERVER A (ENTRY) CONFIGURATION
# =============================================================================

# Comma-separated list of ports to listen on
PORT_LIST=80,443,8080,8443

# Enable TCP BBR optimization
ENABLE_BBR=true

# =============================================================================
# SERVER B (RECEIVER) CONFIGURATION
# =============================================================================

# Certificate Configuration
CERT_MODE=certbot
# CERT_MODE=use-existing
# FULLCHAIN_PATH=/etc/letsencrypt/live/cdn.example.com/fullchain.pem
# PRIVKEY_PATH=/etc/letsencrypt/live/cdn.example.com/privkey.pem

# Certbot Configuration (if CERT_MODE=certbot)
CERTBOT_EMAIL=admin@example.com

# Enable PROXY protocol support
ENABLE_PROXY_PROTOCOL=false

# Enable TCP BBR optimization
ENABLE_BBR=true

# Create decoy site
CREATE_DECOY=true

# =============================================================================
# REALITY CONFIGURATION (if SECURITY=reality)
# =============================================================================

# Reality public key (auto-generated if not provided)
REALITY_PUBLIC_KEY=

# Reality private key (auto-generated if not provided)
REALITY_PRIVATE_KEY=

# SNI domains for Reality (comma-separated)
SNI_DOMAINS=cloudflare.com,github.com,google.com

# Reality short ID (auto-generated if not provided)
REALITY_SHORT_ID=

# =============================================================================
# ADVANCED CONFIGURATION
# =============================================================================

# Xray log level: debug, info, warning, error, none
XRAY_LOG_LEVEL=warning

# Xray log directory
XRAY_LOG_DIR=/var/log/xray

# Nginx configuration directory
NGINX_CONF_DIR=/etc/nginx/conf.d

# Systemd service directory
SYSTEMD_DIR=/etc/systemd/system

# Xray configuration directory
XRAY_CONF_DIR=/etc/xray

# Web root directory
WEB_ROOT=/var/www/html

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================

# SplitHTTP settings (for VLESS)
SC_MAX_EACH_POST_BYTES=1000000
SC_MAX_CONCURRENT_POSTS=6
SC_MIN_POSTS_INTERVAL_MS=25
X_PADDING_BYTES=200
KEEPALIVE_PERIOD=60

# TCP settings
TCP_KEEPALIVE=true
TCP_KEEPALIVE_IDLE=600
TCP_KEEPALIVE_INTERVAL=60
TCP_KEEPALIVE_COUNT=3

# =============================================================================
# FIREWALL CONFIGURATION
# =============================================================================

# Firewall type: ufw, iptables, none
FIREWALL_TYPE=ufw

# =============================================================================
# MONITORING & LOGGING
# =============================================================================

# Enable access logging
ENABLE_ACCESS_LOG=true

# Enable error logging
ENABLE_ERROR_LOG=true

# Log rotation settings
LOG_ROTATION_SIZE=100M
LOG_ROTATION_COUNT=5

# =============================================================================
# SECURITY SETTINGS
# =============================================================================

# TLS fingerprint: chrome, firefox, safari, edge, random
TLS_FINGERPRINT=chrome

# ALPN protocols (comma-separated)
ALPN_PROTOCOLS=http/1.1

# Allow insecure connections (not recommended for production)
ALLOW_INSECURE=false

# =============================================================================
# BACKUP & MAINTENANCE
# =============================================================================

# Enable automatic configuration backup
ENABLE_CONFIG_BACKUP=true

# Backup directory
BACKUP_DIR=/opt/stealth-tunnel-backup

# Backup retention days
BACKUP_RETENTION_DAYS=30
